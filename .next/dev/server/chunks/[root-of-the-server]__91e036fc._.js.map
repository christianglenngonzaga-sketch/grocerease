{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Terryl%20Jean/Downloads/grocer-ease-sql-schema/lib/db.ts"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST ?? \"127.0.0.1\",\r\n  user: process.env.DB_USER ?? \"root\",\r\n  password: process.env.DB_PASSWORD ?? \"\",\r\n  database: process.env.DB_NAME ?? \"grocerease\",\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n});\r\n\r\nexport default pool;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,iLAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Terryl%20Jean/Downloads/grocer-ease-sql-schema/lib/auth.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\"\r\n\r\nconst SECRET = process.env.JWT_SECRET ?? \"change-this-secret\"\r\n\r\nexport function signToken(payload: object): string {\r\n  return jwt.sign(payload, SECRET, { expiresIn: \"7d\" })\r\n}\r\n\r\nexport function verifyToken(token?: string): any | null {\r\n  if (!token) return null\r\n  try {\r\n    const t = token.replace(/^Bearer\\s+/i, \"\")\r\n    return jwt.verify(t, SECRET) as any\r\n  } catch {\r\n    return null\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;AAElC,SAAS,UAAU,OAAe;IACvC,OAAO,qLAAG,CAAC,IAAI,CAAC,SAAS,QAAQ;QAAE,WAAW;IAAK;AACrD;AAEO,SAAS,YAAY,KAAc;IACxC,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI;QACF,MAAM,IAAI,MAAM,OAAO,CAAC,eAAe;QACvC,OAAO,qLAAG,CAAC,MAAM,CAAC,GAAG;IACvB,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Terryl%20Jean/Downloads/grocer-ease-sql-schema/app/api/categories/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport pool from \"@/lib/db\"\nimport { verifyToken } from \"@/lib/auth\"\n\nexport async function GET(req: Request) {\n  try {\n    const auth = req.headers.get(\"authorization\") ?? \"\"\n    const payload = verifyToken(auth)\n    if (!payload?.userId) return NextResponse.json({ error: \"unauthorized\" }, { status: 401 })\n\n    // Ensure user has all default categories (idempotent, no duplicates)\n    await pool.execute(\n      `INSERT IGNORE INTO categories (user_id, name, color, icon)\n       SELECT ?, name, color, icon FROM default_categories\n       WHERE name NOT IN (SELECT name FROM categories WHERE user_id = ?)`,\n\n      [payload.userId, payload.userId]\n    )\n\n    const [rows] = await pool.execute(\n      \"SELECT id, name, color, icon, created_at FROM categories WHERE user_id = ? ORDER BY id\",\n      [payload.userId]\n    )\n    return NextResponse.json({ categories: rows })\n  } catch (err) {\n    console.error(err)\n    return NextResponse.json({ error: \"server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(req: Request) {\n  try {\n    const auth = req.headers.get(\"authorization\") ?? \"\"\n    const payload = verifyToken(auth)\n    if (!payload?.userId) return NextResponse.json({ error: \"unauthorized\" }, { status: 401 })\n\n    const body = await req.json()\n    const { name, color = \"#10B981\", icon = \"box\" } = body\n    if (!name) return NextResponse.json({ error: \"name required\" }, { status: 400 })\n\n    const [res] = await pool.execute(\n      \"INSERT INTO categories (user_id, name, color, icon) VALUES (?, ?, ?, ?)\",\n      [payload.userId, name, color, icon]\n    )\n    const id = (res as any).insertId\n    return NextResponse.json(\n      { category: { id, user_id: payload.userId, name, color, icon } },\n      { status: 201 }\n    )\n  } catch (err) {\n    console.error(err)\n    return NextResponse.json({ error: \"server error\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;QACjD,MAAM,UAAU,IAAA,+JAAW,EAAC;QAC5B,IAAI,CAAC,SAAS,QAAQ,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;QAExF,qEAAqE;QACrE,MAAM,yJAAI,CAAC,OAAO,CAChB,CAAC;;wEAEiE,CAAC,EAEnE;YAAC,QAAQ,MAAM;YAAE,QAAQ,MAAM;SAAC;QAGlC,MAAM,CAAC,KAAK,GAAG,MAAM,yJAAI,CAAC,OAAO,CAC/B,0FACA;YAAC,QAAQ,MAAM;SAAC;QAElB,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,YAAY;QAAK;IAC9C,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;QACjD,MAAM,UAAU,IAAA,+JAAW,EAAC;QAC5B,IAAI,CAAC,SAAS,QAAQ,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;QAExF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,IAAI,EAAE,QAAQ,SAAS,EAAE,OAAO,KAAK,EAAE,GAAG;QAClD,IAAI,CAAC,MAAM,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;QAE9E,MAAM,CAAC,IAAI,GAAG,MAAM,yJAAI,CAAC,OAAO,CAC9B,2EACA;YAAC,QAAQ,MAAM;YAAE;YAAM;YAAO;SAAK;QAErC,MAAM,KAAK,AAAC,IAAY,QAAQ;QAChC,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,UAAU;gBAAE;gBAAI,SAAS,QAAQ,MAAM;gBAAE;gBAAM;gBAAO;YAAK;QAAE,GAC/D;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}