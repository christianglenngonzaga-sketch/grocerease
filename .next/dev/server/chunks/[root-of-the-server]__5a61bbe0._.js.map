{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Terryl%20Jean/Downloads/grocer-ease-sql-schema/lib/db.ts"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST ?? \"127.0.0.1\",\r\n  user: process.env.DB_USER ?? \"root\",\r\n  password: process.env.DB_PASSWORD ?? \"\",\r\n  database: process.env.DB_NAME ?? \"grocerease\",\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n});\r\n\r\nexport default pool;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,iLAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Terryl%20Jean/Downloads/grocer-ease-sql-schema/lib/auth.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\"\r\n\r\nconst SECRET = process.env.JWT_SECRET ?? \"change-this-secret\"\r\n\r\nexport function signToken(payload: object): string {\r\n  return jwt.sign(payload, SECRET, { expiresIn: \"7d\" })\r\n}\r\n\r\nexport function verifyToken(token?: string): any | null {\r\n  if (!token) return null\r\n  try {\r\n    const t = token.replace(/^Bearer\\s+/i, \"\")\r\n    return jwt.verify(t, SECRET) as any\r\n  } catch {\r\n    return null\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;AAElC,SAAS,UAAU,OAAe;IACvC,OAAO,qLAAG,CAAC,IAAI,CAAC,SAAS,QAAQ;QAAE,WAAW;IAAK;AACrD;AAEO,SAAS,YAAY,KAAc;IACxC,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI;QACF,MAAM,IAAI,MAAM,OAAO,CAAC,eAAe;QACvC,OAAO,qLAAG,CAAC,MAAM,CAAC,GAAG;IACvB,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Terryl%20Jean/Downloads/grocer-ease-sql-schema/app/api/auth/register/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport bcrypt from \"bcryptjs\"\nimport pool from \"@/lib/db\"\nimport { signToken } from \"@/lib/auth\"\n\nexport async function POST(req: Request) {\n  try {\n    const body = await req.json()\n    const { email, password, first_name = null, last_name = null } = body\n\n    if (!email || !password) {\n      return NextResponse.json({ error: \"email and password required\" }, { status: 400 })\n    }\n\n    // prevent duplicate\n    const [existing] = await pool.execute(\"SELECT id FROM users WHERE email = ?\", [email])\n    if ((existing as any[]).length > 0) {\n      return NextResponse.json({ error: \"email already registered\" }, { status: 409 })\n    }\n\n    const hash = await bcrypt.hash(password, 10)\n    const [res] = await pool.execute(\n      \"INSERT INTO users (email, password_hash, first_name, last_name) VALUES (?, ?, ?, ?)\",\n      [email, hash, first_name, last_name]\n    )\n\n    const userId = (res as any).insertId\n\n    // Create default categories for the new user\n    const defaultCategories = [\n      { name: \"Fruits & Vegetables\", color: \"#10B981\", icon: \"leaf\" },\n      { name: \"Dairy & Eggs\", color: \"#F59E0B\", icon: \"milk\" },\n      { name: \"Meat & Fish\", color: \"#EF4444\", icon: \"droplet\" },\n      { name: \"Pantry\", color: \"#8B5CF6\", icon: \"box\" },\n    ]\n\n    for (const c of defaultCategories) {\n      await pool.execute(\n        \"INSERT INTO categories (user_id, name, color, icon) VALUES (?, ?, ?, ?)\",\n        [userId, c.name, c.color, c.icon]\n      )\n    }\n\n    const token = signToken({ userId })\n\n    return NextResponse.json(\n      { user: { id: userId, email, first_name, last_name }, token },\n      { status: 201 }\n    )\n  } catch (err) {\n    console.error(err)\n    return NextResponse.json({ error: \"server error\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,aAAa,IAAI,EAAE,YAAY,IAAI,EAAE,GAAG;QAEjE,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,mLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,oBAAoB;QACpB,MAAM,CAAC,SAAS,GAAG,MAAM,yJAAI,CAAC,OAAO,CAAC,wCAAwC;YAAC;SAAM;QACrF,IAAI,AAAC,SAAmB,MAAM,GAAG,GAAG;YAClC,OAAO,mLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2B,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,MAAM,OAAO,MAAM,iLAAM,CAAC,IAAI,CAAC,UAAU;QACzC,MAAM,CAAC,IAAI,GAAG,MAAM,yJAAI,CAAC,OAAO,CAC9B,uFACA;YAAC;YAAO;YAAM;YAAY;SAAU;QAGtC,MAAM,SAAS,AAAC,IAAY,QAAQ;QAEpC,6CAA6C;QAC7C,MAAM,oBAAoB;YACxB;gBAAE,MAAM;gBAAuB,OAAO;gBAAW,MAAM;YAAO;YAC9D;gBAAE,MAAM;gBAAgB,OAAO;gBAAW,MAAM;YAAO;YACvD;gBAAE,MAAM;gBAAe,OAAO;gBAAW,MAAM;YAAU;YACzD;gBAAE,MAAM;gBAAU,OAAO;gBAAW,MAAM;YAAM;SACjD;QAED,KAAK,MAAM,KAAK,kBAAmB;YACjC,MAAM,yJAAI,CAAC,OAAO,CAChB,2EACA;gBAAC;gBAAQ,EAAE,IAAI;gBAAE,EAAE,KAAK;gBAAE,EAAE,IAAI;aAAC;QAErC;QAEA,MAAM,QAAQ,IAAA,6JAAS,EAAC;YAAE;QAAO;QAEjC,OAAO,mLAAY,CAAC,IAAI,CACtB;YAAE,MAAM;gBAAE,IAAI;gBAAQ;gBAAO;gBAAY;YAAU;YAAG;QAAM,GAC5D;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}